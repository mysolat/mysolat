<!-- Navigation - Mobile: bottom dock, Desktop: left mini sidebar -->
<nav class="fixed z-40 backdrop-blur-md bg-white/20 border border-white/30 shadow-2xl transition-all duration-300
            max-md:bottom-3 max-md:left-3 max-md:right-3 max-md:rounded-2xl max-md:safe-bottom
            md:top-4 md:left-4 md:w-16 md:rounded-3xl md:flex md:flex-col md:py-4"
     data-controller="dock" data-dock-target="nav">

  <!-- Mobile: horizontal dock -->
  <div class="flex md:hidden justify-around items-center py-2 px-1">
    <!-- Home -->
    <a href="/" class="dock-item <%= 'dock-item-active' if current_page?(root_path) %>">
      <%= icon "home", class: "size-6" %>
      <span class="text-xs mt-1">Utama</span>
    </a>

    <!-- Monthly -->
    <a href="/monthly" class="dock-item <%= 'dock-item-active' if current_page?(monthly_path) %>">
      <%= icon "calendar-days", class: "size-6" %>
      <span class="text-xs mt-1">Bulanan</span>
    </a>

    <!-- Qibla -->
    <a href="/pages/qibla" class="dock-item <%= 'dock-item-active' if current_page?('/pages/qibla') %>">
      <%= icon "cube-transparent", class: "size-6" %>
      <span class="text-xs mt-1">Kiblat</span>
    </a>

    <!-- Maps -->
    <a href="/pages/maps" class="dock-item <%= 'dock-item-active' if current_page?('/pages/maps') %>">
      <%= icon "map", class: "size-6" %>
      <span class="text-xs mt-1">Peta</span>
    </a>

    <!-- Menu/Sidebar -->
    <label for="drawer" class="dock-item cursor-pointer">
      <%= icon "bars-3", class: "size-6" %>
      <span class="text-xs mt-1">Menu</span>
    </label>
  </div>

  <!-- Desktop: vertical mini sidebar -->
  <div class="hidden md:flex md:flex-col md:items-center md:gap-1 md:h-full md:px-2">
    <!-- Logo at top (always visible) -->
    <a href="/" class="mb-4 p-2 text-primary hover:bg-white/20 rounded-xl transition-colors" title="Solat.my">
      <svg class="w-8 h-8 fill-current" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
        <path d="M400 0C405 0 409.8 2.371 412.8 6.4C447.5 52.7 490.9 81.34 546.3 117.9C551.5 121.4 556.9 124.9 562.3 128.5C591.3 147.7 608 180.2 608 214.6C608 243.1 596.7 269 578.2 288H221.8C203.3 269 192 243.1 192 214.6C192 180.2 208.7 147.7 237.7 128.5C243.1 124.9 248.5 121.4 253.7 117.9C309.1 81.34 352.5 52.7 387.2 6.4C390.2 2.371 394.1 0 400 0V0zM288 440C288 426.7 277.3 416 264 416C250.7 416 240 426.7 240 440V512H192C174.3 512 160 497.7 160 480V352C160 334.3 174.3 320 192 320H608C625.7 320 640 334.3 640 352V480C640 497.7 625.7 512 608 512H560V440C560 426.7 549.3 416 536 416C522.7 416 512 426.7 512 440V512H448V453.1C448 434.1 439.6 416.1 424.1 404.8L400 384L375 404.8C360.4 416.1 352 434.1 352 453.1V512H288V440zM70.4 5.2C76.09 .9334 83.91 .9334 89.6 5.2L105.6 17.2C139.8 42.88 160 83.19 160 126V128H0V126C0 83.19 20.15 42.88 54.4 17.2L70.4 5.2zM0 160H160V296.6C140.9 307.6 128 328.3 128 352V480C128 489.6 130.1 498.6 133.8 506.8C127.3 510.1 119.9 512 112 512H48C21.49 512 0 490.5 0 464V160z"/>
      </svg>
    </a>

    <!-- Collapsible navigation items -->
    <div class="contents" data-dock-target="navItems">
      <!-- Navigation items -->
      <div class="flex flex-col items-center gap-1 flex-1">
        <!-- Home -->
        <a href="/" class="sidebar-item <%= 'sidebar-active' if current_page?(root_path) %>" title="Utama">
          <%= icon "home", class: "size-6" %>
        </a>

        <!-- Monthly -->
        <a href="/monthly" class="sidebar-item <%= 'sidebar-active' if current_page?(monthly_path) %>" title="Bulanan">
          <%= icon "calendar-days", class: "size-6" %>
        </a>

        <!-- Qibla -->
        <a href="/pages/qibla" class="sidebar-item <%= 'sidebar-active' if current_page?('/pages/qibla') %>" title="Arah Kiblat">
          <%= icon "cube-transparent", class: "size-6" %>
        </a>

        <!-- Maps -->
        <a href="/pages/maps" class="sidebar-item <%= 'sidebar-active' if current_page?('/pages/maps') %>" title="Peta Masjid & Surau">
          <%= icon "map", class: "size-6" %>
        </a>

        <!-- Location Filter -->
        <label for="filter-modal" class="sidebar-item cursor-pointer" title="Lokasi">
          <%= icon "map-pin", class: "size-6" %>
        </label>

        <!-- API -->
        <a href="/pages/api" class="sidebar-item <%= 'sidebar-active' if current_page?('/pages/api') %>" title="API">
          <%= icon "code-bracket", class: "size-6" %>
        </a>
      </div>

      <!-- Menu/Sidebar -->
      <div class="flex flex-col items-center gap-1 mt-auto">
        <label for="drawer" class="sidebar-item cursor-pointer" title="Menu">
          <%= icon "bars-3", class: "size-6" %>
        </label>
      </div>
    </div>

    <!-- Collapse toggle button (always visible) -->
    <button class="sidebar-item cursor-pointer mt-auto" data-action="click->dock#toggle" title="Kecilkan/Besarkan">
      <svg class="size-5 transition-transform duration-300" data-dock-target="toggleIcon" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="m4.5 15.75 7.5-7.5 7.5 7.5"/>
      </svg>
    </button>
  </div>
</nav>
