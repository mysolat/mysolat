<div class="drawer-side z-40">
  <label class="drawer-overlay backdrop-blur-sm bg-black/20" for="drawer" aria-label="Close menu"></label>
  <aside class="w-80 min-h-screen flex flex-col m-4 md:ml-24 rounded-3xl backdrop-blur-md bg-white/20 border border-white/30 shadow-2xl overflow-hidden">
    <!-- Header -->
    <div class="sticky top-0 z-10 border-b border-white/20">
      <div class="flex items-center justify-between p-4">
        <div class="flex items-center gap-3">
          <svg class="w-8 h-8 text-primary fill-currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512">
            <path d="M400 0C405 0 409.8 2.371 412.8 6.4C447.5 52.7 490.9 81.34 546.3 117.9C551.5 121.4 556.9 124.9 562.3 128.5C591.3 147.7 608 180.2 608 214.6C608 243.1 596.7 269 578.2 288H221.8C203.3 269 192 243.1 192 214.6C192 180.2 208.7 147.7 237.7 128.5C243.1 124.9 248.5 121.4 253.7 117.9C309.1 81.34 352.5 52.7 387.2 6.4C390.2 2.371 394.1 0 400 0V0zM288 440C288 426.7 277.3 416 264 416C250.7 416 240 426.7 240 440V512H192C174.3 512 160 497.7 160 480V352C160 334.3 174.3 320 192 320H608C625.7 320 640 334.3 640 352V480C640 497.7 625.7 512 608 512H560V440C560 426.7 549.3 416 536 416C522.7 416 512 426.7 512 440V512H448V453.1C448 434.1 439.6 416.1 424.1 404.8L400 384L375 404.8C360.4 416.1 352 434.1 352 453.1V512H288V440zM70.4 5.2C76.09 .9334 83.91 .9334 89.6 5.2L105.6 17.2C139.8 42.88 160 83.19 160 126V128H0V126C0 83.19 20.15 42.88 54.4 17.2L70.4 5.2zM0 160H160V296.6C140.9 307.6 128 328.3 128 352V480C128 489.6 130.1 498.6 133.8 506.8C127.3 510.1 119.9 512 112 512H48C21.49 512 0 490.5 0 464V160z"/>
          </svg>
          <h1 class="text-xl font-bold">Tetapan</h1>
        </div>
        <label class="btn btn-ghost btn-circle btn-sm hover:bg-white/20" for="drawer">
          <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M6 18 18 6M6 6l12 12"/>
          </svg>
        </label>
      </div>
    </div>

    <!-- Settings Content -->
    <div class="flex-1 overflow-y-auto p-4 space-y-6">
      <!-- Location Section -->
      <section>
        <div class="flex items-center gap-2 mb-3">
          <svg class="w-5 h-5 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
            <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"/>
          </svg>
          <h2 class="text-sm font-semibold uppercase tracking-wider text-base-content/70">Lokasi</h2>
        </div>
        <div class="backdrop-blur-sm bg-white/10 rounded-2xl p-1 border border-white/10">
          <label class="btn btn-ghost w-full justify-between font-normal hover:bg-white/20" for="filter-modal">
            <div class="flex items-center gap-3 min-w-0">
              <div class="avatar placeholder shrink-0">
                <div class="bg-primary text-primary-content rounded-xl w-10 h-10 flex items-center justify-center">
                  <span class="text-sm font-bold"><%= @location["code"][0..2] if @location %></span>
                </div>
              </div>
              <div class="text-left min-w-0">
                <div class="font-semibold truncate"><%= @location["location"] if @location %></div>
                <div class="text-xs text-base-content/60 truncate"><%= @location["state"] if @location %></div>
              </div>
            </div>
            <svg class="w-5 h-5 text-base-content/50 shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"/>
            </svg>
          </label>
        </div>
      </section>

      <!-- Theme Section -->
      <section>
        <div class="flex items-center gap-2 mb-3">
          <svg class="w-5 h-5 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M4.098 19.902a3.75 3.75 0 0 0 5.304 0l6.401-6.402M6.75 21A3.75 3.75 0 0 1 3 17.25V4.125C3 3.504 3.504 3 4.125 3h5.25c.621 0 1.125.504 1.125 1.125v4.072M6.75 21a3.75 3.75 0 0 0 3.75-3.75V8.197M6.75 21h13.125c.621 0 1.125-.504 1.125-1.125v-5.25c0-.621-.504-1.125-1.125-1.125h-4.072M10.5 8.197l2.88-2.88c.438-.439 1.15-.439 1.59 0l3.712 3.713c.44.44.44 1.152 0 1.59l-2.879 2.88M6.75 17.25h.008v.008H6.75v-.008Z"/>
          </svg>
          <h2 class="text-sm font-semibold uppercase tracking-wider text-base-content/70">Tema</h2>
        </div>

        <!-- Theme Grid -->
        <div class="grid grid-cols-4 gap-2">
          <% themes.each do |theme| %>
            <button class="group relative rounded-xl p-2 border-2 border-white/10 backdrop-blur-sm bg-white/5 transition-all hover:border-primary hover:bg-white/20 focus:border-primary focus:outline-none" data-action="click->theme#switch" data-theme-value="<%= theme %>" data-theme="<%= theme %>" title="<%= theme.capitalize %>">
              <div class="flex gap-0.5 justify-center">
                <div class="w-3 h-6 rounded-l-md bg-primary"></div>
                <div class="w-3 h-6 bg-secondary"></div>
                <div class="w-3 h-6 bg-accent"></div>
                <div class="w-3 h-6 rounded-r-md bg-neutral"></div>
              </div>
            </button>
          <% end %>
        </div>
      </section>

      <!-- Time Format Section -->
      <section data-controller="time-format">
        <div class="flex items-center gap-2 mb-3">
          <svg class="w-5 h-5 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"/>
          </svg>
          <h2 class="text-sm font-semibold uppercase tracking-wider text-base-content/70">Format Masa</h2>
        </div>

        <div class="backdrop-blur-sm bg-white/10 rounded-2xl p-4 border border-white/10">
          <label class="flex items-center justify-between cursor-pointer">
            <div class="flex items-center gap-3">
              <span class="font-medium" data-time-format-target="label">12 jam</span>
            </div>
            <input type="checkbox" class="toggle toggle-primary" data-time-format-target="toggle" data-action="change->time-format#toggle">
          </label>
          <p class="text-xs text-base-content/50 mt-2">Tukar antara format 12 jam (AM/PM) dan 24 jam</p>
        </div>
      </section>

      <!-- Quick Actions -->
      <section>
        <div class="flex items-center gap-2 mb-3">
          <svg class="w-5 h-5 text-primary" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M13.5 6H5.25A2.25 2.25 0 0 0 3 8.25v10.5A2.25 2.25 0 0 0 5.25 21h10.5A2.25 2.25 0 0 0 18 18.75V10.5m-10.5 6L21 3m0 0h-5.25M21 3v5.25"/>
          </svg>
          <h2 class="text-sm font-semibold uppercase tracking-wider text-base-content/70">Pautan</h2>
        </div>

        <div class="backdrop-blur-sm bg-white/10 rounded-2xl overflow-hidden divide-y divide-white/10 border border-white/10">
          <a class="flex items-center gap-3 p-3 hover:bg-white/20 transition-colors" href="/pages/api">
            <div class="bg-info/20 text-info rounded-lg p-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
              </svg>
            </div>
            <span class="font-medium">API</span>
            <svg class="w-4 h-4 ml-auto text-base-content/40" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"/>
            </svg>
          </a>

          <a class="flex items-center gap-3 p-3 hover:bg-white/20 transition-colors" href="https://github.com/mysolat/mysolat" target="_blank">
            <div class="bg-base-content/10 text-base-content rounded-lg p-2">
              <svg class="w-5 h-5 fill-currentColor" viewBox="0 0 24 24">
                <path clip-rule="evenodd" fill-rule="evenodd" d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"/>
              </svg>
            </div>
            <span class="font-medium">GitHub</span>
            <svg class="w-4 h-4 ml-auto text-base-content/40" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"/>
            </svg>
          </a>

          <a class="flex items-center gap-3 p-3 hover:bg-white/20 transition-colors" href="https://unsplash.com/collections/72065378/masjid-malaysia" target="_blank">
            <div class="bg-success/20 text-success rounded-lg p-2">
              <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"/>
              </svg>
            </div>
            <span class="font-medium">Galeri Foto</span>
            <svg class="w-4 h-4 ml-auto text-base-content/40" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"/>
            </svg>
          </a>
        </div>
      </section>
    </div>

    <!-- Footer -->
    <div class="p-4 border-t border-white/20 text-center">
      <p class="text-xs text-base-content/50">&copy; <%= Date.current.year %> Solat.my</p>
    </div>
  </aside>
</div>
