<div class="flex flex-col items-center justify-center text-base-content z-0 text-center w-full my-auto px-4 md:px-8 lg:px-12 py-8 md:pt-16"
     data-controller="prayer-times"
     data-prayer-times-zone-value="<%= @zone %>"
     data-prayer-times-prayers-value="{}">

  <!-- Main Clock & Date Section -->
  <div class="mb-6">
    <!-- Large Clock -->
    <div class="text-6xl md:text-7xl lg:text-8xl font-black tabular-nums tracking-tight leading-none" data-controller="clock" data-clock-mode="hero"></div>

    <!-- Date Display with Navigation -->
    <div class="mt-4 flex items-center justify-center gap-4">
      <!-- Previous Day Button -->
      <button type="button"
              class="p-2 rounded-full backdrop-blur-md bg-white/10 border border-white/20 hover:bg-white/20 transition-all"
              data-action="click->prayer-times#previousDay"
              data-prayer-times-target="prevButton"
              aria-label="Hari sebelumnya">
        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M15.75 19.5 8.25 12l7.5-7.5"/>
        </svg>
      </button>

      <!-- Date Display -->
      <div class="flex flex-col items-center gap-1">
        <div class="text-xl md:text-2xl lg:text-3xl font-medium text-base-content/80" data-prayer-times-target="dateDisplay">
          <%= l Date.current, format: :extra %>
        </div>
        <div class="text-lg md:text-xl text-primary font-semibold" data-prayer-times-target="hijriDisplay">
          <%= hijri_date(Date.current.strftime("%Y-%m-%d")) %> H
        </div>
      </div>

      <!-- Next Day Button -->
      <button type="button"
              class="p-2 rounded-full backdrop-blur-md bg-white/10 border border-white/20 hover:bg-white/20 transition-all"
              data-action="click->prayer-times#nextDay"
              data-prayer-times-target="nextButton"
              aria-label="Hari seterusnya">
        <svg class="w-5 h-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="m8.25 4.5 7.5 7.5-7.5 7.5"/>
        </svg>
      </button>
    </div>

    <!-- Location Badge -->
    <label class="inline-flex items-center gap-2 cursor-pointer mt-4 backdrop-blur-md bg-white/10 rounded-full px-5 py-2.5 border border-white/20 hover:bg-white/20 transition-all" for="filter-modal">
      <svg class="w-4 h-4 opacity-70" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="M15 10.5a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"/>
        <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 10.5c0 7.142-7.5 11.25-7.5 11.25S4.5 17.642 4.5 10.5a7.5 7.5 0 1 1 15 0Z"/>
      </svg>
      <span class="text-sm font-semibold"><%= @location["location"] %></span>
      <svg class="w-4 h-4 opacity-50" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="2" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" d="m19.5 8.25-7.5 7.5-7.5-7.5"/>
      </svg>
    </label>
  </div>

  <!-- Next Prayer Card -->
  <div class="w-full max-w-2xl mb-8">
    <div class="backdrop-blur-md bg-white/10 rounded-3xl p-6 border border-white/20 shadow-2xl">
      <!-- Next Prayer Label -->
      <div class="flex items-center justify-center gap-2 mb-3">
        <div class="w-2 h-2 rounded-full bg-primary animate-pulse"></div>
        <span class="text-sm font-semibold text-base-content/70 uppercase tracking-wider" data-prayer-times-target="nextPrayer">Solat Seterusnya</span>
      </div>

      <!-- Countdown Timer -->
      <div class="text-4xl md:text-5xl font-black tabular-nums text-center text-primary" data-prayer-times-target="countdown">
        --:--:--
      </div>

      <!-- Progress Bar -->
      <div class="w-full bg-base-content/10 rounded-full h-1.5 mt-4 overflow-hidden">
        <div class="bg-primary h-full rounded-full transition-all duration-1000 ease-out" data-prayer-times-target="progressBar" style="width: 0%"></div>
      </div>

      <!-- Progress Text -->
      <div class="flex justify-between text-xs mt-2 text-base-content/50 font-medium">
        <span data-prayer-times-target="progressStart">--:--</span>
        <span data-prayer-times-target="progressEnd">--:--</span>
      </div>
    </div>
  </div>

  <!-- Prayer Times Grid - 2 rows x 4 columns -->
  <div class="w-full max-w-2xl">
    <div class="grid grid-cols-4 gap-3 md:gap-4" data-prayer-times-target="prayerGrid">
      <!-- Loading skeleton -->
      <% 8.times do %>
        <div class="backdrop-blur-md bg-white/10 rounded-2xl p-4 md:p-5 border border-white/10 animate-pulse">
          <div class="h-3 w-12 bg-base-content/20 rounded mb-2"></div>
          <div class="h-8 w-16 bg-base-content/20 rounded mb-1"></div>
          <div class="h-2 w-8 bg-base-content/20 rounded"></div>
        </div>
      <% end %>
    </div>
  </div>
</div>
